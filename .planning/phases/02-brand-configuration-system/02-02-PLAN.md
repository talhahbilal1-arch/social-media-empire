---
phase: 02-brand-configuration-system
plan: 02
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - config/brands/menopause-planner.yaml
  - config/brands/daily-deal-darling.yaml
  - config/brands/fitness-made-easy.yaml
  - src/utils/__init__.py
  - src/utils/brand_loader.py
autonomous: true

must_haves:
  truths:
    - "Menopause Planner brand loads with sage green (#9CAF88) primary color and Etsy CTA"
    - "Daily Deal Darling brand loads with coral (#FF6B6B) primary color and website CTA"
    - "Fitness Made Easy brand loads with blue (#3498DB) primary color"
    - "Each brand has distinct TTS voice (different voices per brand)"
    - "BrandLoader can load any brand by slug and list all available brands"
  artifacts:
    - path: "config/brands/menopause-planner.yaml"
      provides: "Menopause Planner brand configuration"
      contains: "tts_voice:"
    - path: "config/brands/daily-deal-darling.yaml"
      provides: "Daily Deal Darling brand configuration"
      contains: "tts_voice:"
    - path: "config/brands/fitness-made-easy.yaml"
      provides: "Fitness Made Easy brand configuration"
      contains: "tts_voice:"
    - path: "src/utils/brand_loader.py"
      provides: "Brand loading utility"
      contains: "def load_brand"
      min_lines: 30
  key_links:
    - from: "src/utils/brand_loader.py"
      to: "config/brands/*.yaml"
      via: "yaml.safe_load from Path"
      pattern: "yaml\\.safe_load"
    - from: "src/utils/brand_loader.py"
      to: "src/models/brand.py"
      via: "BrandConfig.model_validate"
      pattern: "BrandConfig\\.model_validate"
---

<objective>
Create three brand YAML configurations and the BrandLoader utility to load them.

Purpose: Provide distinct brand identities (Menopause Planner, Daily Deal Darling, Fitness Made Easy) that can be loaded by name for video generation.
Output: Three brand YAML files and a BrandLoader class that validates and caches configurations.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-brand-configuration-system/02-RESEARCH.md
@.planning/phases/02-brand-configuration-system/02-01-SUMMARY.md
@src/models/brand.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create three brand YAML configuration files</name>
  <files>config/brands/menopause-planner.yaml, config/brands/daily-deal-darling.yaml, config/brands/fitness-made-easy.yaml</files>
  <action>
Create three YAML files in `config/brands/` with these specifications:

**menopause-planner.yaml:**
```yaml
name: Menopause Planner
slug: menopause-planner
colors:
  primary: "#9CAF88"      # Sage green
  secondary: "#D4A5A5"    # Dusty rose
  accent: "#F5F5DC"       # Beige
tts_voice: en-US-JennyNeural  # Warm, friendly female voice
cta_text: Shop my Etsy store
cta_url: https://etsy.com/shop/menopauseplanner
description: Empowering women through the menopause transition
target_audience: Women 45-60
```

**daily-deal-darling.yaml:**
```yaml
name: Daily Deal Darling
slug: daily-deal-darling
colors:
  primary: "#FF6B6B"      # Coral
  secondary: "#4ECDC4"    # Teal
  accent: "#FFE66D"       # Yellow
tts_voice: en-US-AriaNeural  # Enthusiastic, friendly female voice
cta_text: Visit dailydealdarling.com
cta_url: https://dailydealdarling.com
description: Your guide to the best deals and recommendations
target_audience: Women 25-55
```

**fitness-made-easy.yaml:**
```yaml
name: Fitness Made Easy
slug: fitness-made-easy
colors:
  primary: "#3498DB"      # Blue
  secondary: "#2ECC71"    # Lime green
  accent: "#F39C12"       # Orange
tts_voice: en-US-SaraNeural  # Energetic, motivational female voice
cta_text: Start your fitness journey
cta_url: https://example.com/fitness  # TBD - placeholder
description: Simple fitness tips for busy women
target_audience: Busy women seeking practical fitness advice
```

Use 2-space indentation. Include comments for color names. Delete any existing .gitkeep file in the directory.
  </action>
  <verify>
Run: `python -c "import yaml; from pathlib import Path; data = yaml.safe_load(Path('config/brands/menopause-planner.yaml').read_text()); print(data['colors']['primary'])"`
Should print: #9CAF88
  </verify>
  <done>Three brand YAML files exist and parse correctly with yaml.safe_load</done>
</task>

<task type="auto">
  <name>Task 2: Create BrandLoader utility</name>
  <files>src/utils/brand_loader.py, src/utils/__init__.py</files>
  <action>
Create `src/utils/brand_loader.py` with:

1. **load_brand(brand_slug: str) -> BrandConfig:**
   - Takes slug like "menopause-planner"
   - Loads from `config/brands/{slug}.yaml`
   - Uses `yaml.safe_load()` (CRITICAL: never yaml.load())
   - Validates with `BrandConfig.model_validate(data)`
   - Raises FileNotFoundError with helpful message if brand not found

2. **list_brands() -> list[str]:**
   - Returns list of available brand slugs from config/brands/*.yaml
   - Uses Path.glob() and .stem to get names

3. **BrandLoader class (optional caching):**
   - __init__(config_dir: Path = None) - defaults to config/brands
   - load(brand_slug: str) -> BrandConfig - with lru_cache for performance
   - list_brands() -> list[str]

Import yaml at top. Handle Path correctly (use project root, not relative).

Update `src/utils/__init__.py` to export load_brand, list_brands, BrandLoader.
  </action>
  <verify>
Run: `python -c "from src.utils.brand_loader import load_brand, list_brands; brands = list_brands(); print(f'Brands: {brands}'); mp = load_brand('menopause-planner'); print(f'Loaded: {mp.name}, CTA: {mp.cta_text}')"`
Should print:
- Brands: ['daily-deal-darling', 'fitness-made-easy', 'menopause-planner']
- Loaded: Menopause Planner, CTA: Shop my Etsy store
  </verify>
  <done>BrandLoader loads all three brands, validates them, and lists available brands</done>
</task>

<task type="auto">
  <name>Task 3: Verify all brands load with distinct voices</name>
  <files>(no new files)</files>
  <action>
Create a verification script that:
1. Loads all three brands using list_brands() + load_brand()
2. Prints each brand's name, primary color (as hex), and TTS voice
3. Verifies all three TTS voices are different
4. Exits 0 on success, 1 on failure

Run the script to confirm all brands work end-to-end.

Script can be inline Python or saved temporarily - the verification is what matters.
  </action>
  <verify>
Run verification showing:
- Menopause Planner: #9caf88, en-US-JennyNeural
- Daily Deal Darling: #ff6b6b, en-US-AriaNeural
- Fitness Made Easy: #3498db, en-US-SaraNeural
All three voices are distinct.
  </verify>
  <done>All three brands load correctly with distinct colors and voices</done>
</task>

</tasks>

<verification>
1. All YAML files parse: `python -c "import yaml; from pathlib import Path; [yaml.safe_load(f.read_text()) for f in Path('config/brands').glob('*.yaml')]"`
2. BrandLoader imports: `python -c "from src.utils import load_brand, list_brands, BrandLoader"`
3. Load each brand: Each brand loads without validation errors
4. Distinct voices: Three different TTS voice IDs across brands
5. CTA URLs: Each brand has appropriate CTA text and URL
</verification>

<success_criteria>
- Three brand YAML files exist in config/brands/
- Each brand has distinct primary/secondary colors
- Each brand has distinct TTS voice (JennyNeural, AriaNeural, SaraNeural)
- BrandLoader loads any brand by slug
- list_brands() returns all three brand slugs
- Color validation works (hex codes normalized to lowercase)
</success_criteria>

<output>
After completion, create `.planning/phases/02-brand-configuration-system/02-02-SUMMARY.md`
</output>
